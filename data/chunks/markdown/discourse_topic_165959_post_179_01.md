---
chunk_id: discourse_topic_165959_post_179_01
source_url: https://discourse.onlinedegree.iitm.ac.in/t/165959/179
source_title: GA4 - Data Sourcing - Discussion Thread [TDS Jan 2025]
content_type: discourse
tokens: 893
username: 22f2000008
post_number: 179
topic_id: 165959
---

179 by 22f2000008

**Direct Link**: [Post #179](https://discourse.onlinedegree.iitm.ac.in/t/165959/179)

I am getting this error again and again after running the code in collab this city `Nur-Sultan`?

---

**[Discussion Image by 22f2000008]** This image depicts a student's error within a Jupyter Notebook, specifically related to fetching weather data using a BBC Weather URL. The error message "Could not find location ID for Nur-Sultan" suggests an issue resolving the location ID. The traceback indicates a `NameError: name 'location_id' is not defined` on line 35 where the `weather_url` is constructed using an f-string, attempting to insert a `location_id` variable that has not been previously defined or assigned a value. The code snippet shows line 34, "# BBC Weather URL" and line 37 "# Fetch weather data", which act as comments, clarifying the purpose of the surrounding code. This indicates the student has not properly defined the `location_id` before using it in the f-string to create the BBC Weather URL.sign a value to `location_id` for Nur-Sultan but failed to do so before this line was executed, highlighting a potential logic error or missing variable assignment in the student's code. This suggests the student needs to define and assign the `location_id` variable before constructing the URL string." alt="image" data-base62-sha1="hqtAtOqBPUTDPLBGxebZFxIXrOJ" width="690" height="252" srcset="**[Discussion Image by 22f2000008]** This image shows a student's code error during the "GA4 - Data Sourcing - Discussion Thread [TDS Jan 2025]". The error message "Error: Could not find location ID for Nur-Sultan" is followed by a Python `NameError: name 'location_id' is not defined`. The traceback highlights line 35: `weather_url = f'https://www.bbc.com/weather/{location_id}'`, indicating that the variable `location_id` was used in an f-string without being previously defined or assigned a value. The student's code attempts to construct a BBC Weather URL using a placeholder for the location ID, but the script fails because it cannot find the necessary `location_id`. To resolve this, the student needs to define the `location_id` variable with the correct ID for Nur-Sultan before constructing the URL., **[Discussion Image by 22f2000008]** This image captures a student's question within a coding assignment, specifically concerning data sourcing for a GA4 project, as part of a TDS Jan 2025 discussion thread. The student encountered a `NameError: name 'location_id' is not defined` while trying to construct a BBC Weather URL using an f-string on line 35: `weather_url = f'https://www.bbc.com/weather/{location_id}'`. The traceback indicates the error originated in an IPython cell, and the initial error message states `Error: Could not find location ID for Nur-Sultan`, meaning the code failed to retrieve or define a `location_id` for the city of Nur-Sultan before its use in the URL construction. This suggests the student needs to ensure the `location_id` variable is properly defined and populated with the correct ID before creating the `weather_url`. 1.5x, **[Discussion Image by 22f2000008]** This image shows a student's code error in a Jupyter Notebook related to fetching weather data for Nur-Sultan. The error message "Could not find location ID for Nur-Sultan" is followed by a Python NameError, specifically "name 'location_id' is not defined". The traceback highlights line 35 where the `weather_url` variable is being assigned using an f-string with a placeholder for `location_id`. The error indicates that the `location_id` variable was not defined or assigned a value before being used in the f-string, preventing the URL from being properly constructed. This is a common student error indicating a misunderstanding of variable scope and definition. The student needs to define `location_id` prior to line 35. 2x" data-dominant-color="F5F5F8">image936Ã—343 26 KB

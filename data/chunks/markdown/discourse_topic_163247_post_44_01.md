---
chunk_id: discourse_topic_163247_post_44_01
source_url: https://discourse.onlinedegree.iitm.ac.in/t/163247/44
source_title: GA3 - Large Language Models - Discussion Thread [TDS Jan 2025]
content_type: discourse
tokens: 414
username: 23f2003853
post_number: 44
topic_id: 163247
---

23f2003853

**Direct Link**: [Post #44](https://discourse.onlinedegree.iitm.ac.in/t/163247/44)

each time when I run the following code it gives me different number. None of the answer is correct. can help to fix the issue

---

**[Discussion Image by 23f2003853]** This image depicts a student's code attempt to use the OpenAI chat completions endpoint with GPT-4, likely as part of a TDS course assignment. The code initializes the API endpoint URL, sets the 'Authorization' and 'Content-Type' headers, and constructs a payload containing a 'user_message'. It then sends a POST request to the OpenAI API, parses the JSON response, and checks if the request was successful by verifying the response status code. The code attempts to retrieve and print the number of input tokens used; if the request fails, it prints a message indicating the failure and includes the status code and response JSON. The image reveals the student may be confused about API usage. The "input tokens used: 544" shown at the bottom of the image indicates successful execution, however.s up the API endpoint URL, headers including authorization (API key), and constructs a payload containing the user's message. It then sends a POST request to the OpenAI API, parses the JSON response, and checks if the request was successful based on the status code, printing the number of input tokens used or displaying an error message if the request failed, showing a debugging or troubleshooting scenario. The key configuration aspects revolve around the correct API endpoint, header formatting including the authentication token, and properly structured JSON data payload with "role" and "content" keys for sending the user message, indicating that this is a potential example or learning guide." alt="image" data-base62-sha1="4o8Y0mqfPihT2ZE4vKXVR0v9LMN" width="584" height="246">image584Ã—246 46 KB
